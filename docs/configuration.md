# Configuration

Docuserve is configured through the Pict application configuration file and through the content files it loads at runtime.

## Application Configuration

The file `Pict-Application-Docuserve-Configuration.json` controls the Pict application settings:

```json
{
  "Name": "Pict Docuserve",
  "Hash": "Docuserve",
  "MainViewportViewIdentifier": "Docuserve-Layout",
  "AutoSolveAfterInitialize": true,
  "AutoRenderMainViewportViewAfterInitialize": false,
  "AutoRenderViewsAfterInitialize": false,
  "pict_configuration": {
    "Product": "Docuserve-Pict-Application"
  }
}
```

## Runtime State

The application initializes `AppData.Docuserve` with these properties:

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `CatalogURL` | string | `"retold-catalog.json"` | URL to the module catalog JSON |
| `DocsBaseURL` | string | `""` | Base URL prefix for local doc fetches |
| `CatalogLoaded` | boolean | `false` | Whether the catalog loaded successfully |
| `CoverLoaded` | boolean | `false` | Whether _cover.md loaded successfully |
| `SidebarLoaded` | boolean | `false` | Whether _sidebar.md loaded successfully |
| `TopBarLoaded` | boolean | `false` | Whether _topbar.md loaded successfully |
| `KeywordIndexLoaded` | boolean | `false` | Whether retold-keyword-index.json loaded |
| `KeywordDocumentCount` | number | `0` | Number of documents in the keyword index |
| `SidebarVisible` | boolean | `true` | Whether the sidebar is currently visible |
| `CurrentGroup` | string | `""` | Currently viewed module group key |
| `CurrentModule` | string | `""` | Currently viewed module name |
| `CurrentPath` | string | `""` | Currently viewed document path |

## Content Configuration

### Catalog Format

The `retold-catalog.json` file is generated by Indoctrinate and follows this structure:

```json
{
  "Generated": "2026-01-01T00:00:00.000Z",
  "GitHubOrg": "your-org",
  "DefaultBranch": "main",
  "Groups": [
    {
      "Name": "Group Name",
      "Key": "group-key",
      "Description": "What this group contains",
      "Modules": [
        {
          "Name": "module-name",
          "Repo": "module-repo",
          "Group": "group-key",
          "Branch": "main",
          "HasDocs": true,
          "Sidebar": []
        }
      ]
    }
  ]
}
```

The `GitHubOrg`, `DefaultBranch`, and per-module `Repo` and `Branch` fields are used to construct raw GitHub URLs for fetching module documentation.

### Module Documentation URLs

When a user navigates to a module's docs, the provider constructs:

```
https://raw.githubusercontent.com/{GitHubOrg}/{Repo}/{Branch}/docs/{path}
```

For example, navigating to `#/doc/fable/fable` fetches:

```
https://raw.githubusercontent.com/stevenvelozo/fable/master/docs/README.md
```

## Styling

Base styles live in `css/docuserve.css`. Each view also injects its own CSS through the Pict `CSSMap` system. The view CSS is defined inline in each view's configuration object and is injected into the `<style id="PICT-CSS">` element at render time.

To customize the appearance, you can:

1. Edit `css/docuserve.css` for global styles
2. Edit individual view CSS in the `CSS` property of each view's `_ViewConfiguration`
3. Add additional CSS files to the `html/` folder and reference them in `index.html`
